<!DOCTYPE html>
<html>
<head>
  <title>WebSocket Matchmaking</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
</head>
<body>
<h2>WebSocket Matchmaking</h2>
<button onclick="connect()">Connect</button>
<button onclick="sendMatchmakingRequest()">Send Matchmaking Request</button>
<div id="output"></div>

<script>
  let stompClient = null;

  function connect() {
    let socket = new SockJS("http://localhost:8080/ws-matchmaking");
    stompClient = Stomp.over(socket);
    stompClient.connect({}, function () {
      console.log("Connected to WebSocket");
      stompClient.subscribe("/topic/matchmaking-updates", function (message) {
        document.getElementById("output").innerHTML += "<p>" + message.body + "</p>";
      });
    });
  }

  function sendMatchmakingRequest() {
    if (stompClient) {
      stompClient.send("/app/matchmaking", {}, JSON.stringify({ userId: 123 }));
    }
  }
</script>
</body>
</html>
